import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { detectPlatformCapabilities } from '../services/platformDetector';
import { loadDatabasesFromFilesystem, loadDatabasesFromUpload } from '../services/databaseManager';
export default function LandingPage({ onDatabasesLoaded }) {
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState(null);
    const capabilities = detectPlatformCapabilities();
    async function handleFilesystemAccess() {
        setLoading(true);
        setError(null);
        try {
            const dbs = await loadDatabasesFromFilesystem();
            onDatabasesLoaded(dbs);
        }
        catch (err) {
            setError(err.message);
        }
        finally {
            setLoading(false);
        }
    }
    async function handleFileUpload() {
        setLoading(true);
        setError(null);
        try {
            const dbs = await loadDatabasesFromUpload();
            onDatabasesLoaded(dbs);
        }
        catch (err) {
            setError(err.message);
        }
        finally {
            setLoading(false);
        }
    }
    return (_jsx("div", { className: "min-h-screen bg-gradient-to-br from-slate-50 to-slate-200 flex items-center justify-center p-4", children: _jsxs("div", { className: "max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8", children: [_jsxs("div", { className: "text-center mb-8", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83C\uDFE6" }), _jsx("h1", { className: "text-4xl font-bold text-slate-800 mb-2", children: "CARapp Petro\u0219ani" }), _jsx("p", { className: "text-slate-600 text-lg", children: "Casa de Ajutor Reciproc - Gestiune membri \u0219i \u00EEmprumuturi" })] }), _jsxs("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6", children: [_jsx("h3", { className: "font-semibold text-blue-900 mb-2", children: "\uD83D\uDC4B Bine a\u021Bi venit!" }), _jsx("p", { className: "text-blue-800 text-sm", children: "Pentru a \u00EEncepe, trebuie s\u0103 \u00EEnc\u0103rca\u021Bi bazele de date. Alege\u021Bi metoda preferat\u0103 mai jos." })] }), _jsxs("div", { className: "space-y-4 mb-6", children: [capabilities.supportsFileSystemAccess && !capabilities.isIOS && (_jsx("button", { onClick: handleFilesystemAccess, disabled: loading, className: "w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-xl p-6 text-left transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "text-4xl", children: "\uD83D\uDDC2\uFE0F" }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "text-xl font-bold mb-1", children: "Selecteaz\u0103 dosar cu baze de date" }), _jsx("div", { className: "text-green-100 text-sm", children: "\u2728 Recomandat: Aplica\u021Bia va lucra direct pe fi\u0219iere, f\u0103r\u0103 upload/download" }), _jsxs("div", { className: "text-green-200 text-xs mt-1", children: ["\uD83D\uDCF1 Disponibil pe: ", capabilities.browserName, " (", capabilities.platform, ")"] })] })] }) })), _jsx("button", { onClick: handleFileUpload, disabled: loading, className: "w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl p-6 text-left transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("div", { className: "text-4xl", children: "\uD83D\uDCE4" }), _jsxs("div", { className: "flex-1", children: [_jsx("div", { className: "text-xl font-bold mb-1", children: "\u00CEncarc\u0103 fi\u0219iere baze de date" }), _jsx("div", { className: "text-blue-100 text-sm", children: "Compatibil: Upload fi\u0219iere, lucreaz\u0103 \u00EEn aplica\u021Bie, salveaz\u0103 \u00EEnapoi" }), _jsx("div", { className: "text-blue-200 text-xs mt-1", children: "\uD83D\uDCF1 Disponibil pe: Toate browserele \u0219i platformele" })] })] }) })] }), _jsxs("div", { className: "bg-slate-50 rounded-lg p-4 text-sm mb-6", children: [_jsx("div", { className: "font-semibold text-slate-700 mb-2", children: "\uD83D\uDCCB Fi\u0219iere necesare:" }), _jsxs("div", { className: "space-y-1 text-xs text-slate-600", children: [_jsxs("div", { children: ["\u2705 ", _jsx("span", { className: "font-medium", children: "MEMBRII.db" }), " - Obligatoriu"] }), _jsxs("div", { children: ["\u2705 ", _jsx("span", { className: "font-medium", children: "DEPCRED.db" }), " - Obligatoriu"] }), _jsxs("div", { children: ["\u2139\uFE0F ", _jsx("span", { className: "font-medium", children: "LICHIDATI.db" }), " - Op\u021Bional"] }), _jsxs("div", { children: ["\u2139\uFE0F ", _jsx("span", { className: "font-medium", children: "ACTIVI.db" }), " - Op\u021Bional"] })] })] }), (capabilities.isIOS || capabilities.browserName === 'Safari') && (_jsxs("div", { className: "bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm mb-6", children: [_jsx("div", { className: "font-semibold text-blue-800 mb-2", children: "\uD83D\uDCF1 Instruc\u021Biuni pentru iOS/Safari:" }), _jsxs("div", { className: "space-y-1 text-xs text-blue-700", children: [_jsxs("div", { children: ["1\uFE0F\u20E3 Asigura\u021Bi-v\u0103 c\u0103 fi\u0219ierele .db sunt salvate \u00EEn aplica\u021Bia ", _jsx("span", { className: "font-medium", children: "Files" }), " (Fi\u0219iere)"] }), _jsx("div", { children: "2\uFE0F\u20E3 La ap\u0103sarea butonului \"\u00CEncarc\u0103 fi\u0219iere\", ve\u021Bi putea selecta din:" }), _jsx("div", { className: "ml-4", children: "\u2022 iCloud Drive" }), _jsx("div", { className: "ml-4", children: "\u2022 Pe iPhone-ul meu / iPad-ul meu" }), _jsx("div", { className: "ml-4", children: "\u2022 Alte loca\u021Bii disponibile" }), _jsx("div", { children: "3\uFE0F\u20E3 Selecta\u021Bi toate cele 4 fi\u0219iere simultan (\u021Bine\u021Bi ap\u0103sat pentru selec\u021Bie multipl\u0103)" }), _jsx("div", { className: "mt-2 text-blue-600 font-medium", children: "\uD83D\uDCA1 Dac\u0103 nu vede\u021Bi fi\u0219ierele .db, ap\u0103sa\u021Bi \"Browse\" \u0219i c\u0103uta\u021Bi manual" })] })] })), _jsxs("div", { className: "bg-slate-50 rounded-lg p-4 text-sm text-slate-600", children: [_jsx("div", { className: "font-semibold mb-2", children: "\u2139\uFE0F Informa\u021Bii platform\u0103:" }), _jsxs("div", { className: "grid grid-cols-2 gap-2 text-xs", children: [_jsxs("div", { children: ["\uD83D\uDCF1 Browser: ", _jsx("span", { className: "font-medium", children: capabilities.browserName })] }), _jsxs("div", { children: ["\uD83D\uDCBB Platform\u0103: ", _jsx("span", { className: "font-medium", children: capabilities.platform })] }), _jsxs("div", { children: ["\u2705 PWA: ", _jsx("span", { className: "font-medium", children: capabilities.isPWA ? 'Da' : 'Nu' })] }), _jsxs("div", { children: ["\uD83C\uDF10 Online: ", _jsx("span", { className: "font-medium", children: capabilities.isOnline ? 'Da' : 'Nu' })] })] })] }), error && (_jsxs("div", { className: "mt-4 bg-red-50 border border-red-200 rounded-lg p-4 text-red-800", children: [_jsx("div", { className: "font-semibold mb-1", children: "\u274C Eroare" }), _jsx("div", { className: "text-sm", children: error })] })), loading && (_jsxs("div", { className: "mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-yellow-800 flex items-center gap-3", children: [_jsx("div", { className: "animate-spin text-2xl", children: "\u23F3" }), _jsx("div", { children: "Se \u00EEncarc\u0103 bazele de date..." })] }))] }) }));
}
